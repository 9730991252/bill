{% extends 'home/base.html' %}
{% block content %}
{% include 'include/alert.html' %}
<style>
    *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    .item_box{
        overflow: hidden;
        width: 300px;
        border-radius: 20px;
        border: 1px solid rgba(0, 0, 0, 0.2);
        margin: auto;
        margin-top: 10px;
        margin-bottom: 20px;
    }
    .item_name{
        height: 50px;
        font-size: 20px;
        font-weight: 600;
        margin-top: 10px;
        margin-bottom: 10px;
        padding: 15px;
    }
    h6{
        margin-left: 10px;
    }
    .items, .item_footer{
        display: flex;
        justify-content: space-between;
        margin: 20px;
        margin-top: 1px;
        font-weight: 500;

    }
    .items div, .item_footer div{
        text-align: center;
        background-color: rgb(147, 247, 140);
        border-radius: 6.5px;
    }
    .items_qty{
        margin: 20px;
        margin-top: 1px;
        font-weight: 500;
        text-align: center;
        background-color: rgb(147, 247, 140);
        border-radius: 6.5px;
    }
    .items_qty_footer{
        display: flex;
        justify-content: space-between;
        margin-left: 5px;
        margin-right: 5px;
    }
    .qty_p{
        display: flex;
        justify-content: center;
        width: 100%;
    }
    .price, .invice_number{
        width: 120px;
        text-align: center;
    }
    .qty, .date{
        width: 120px;
        text-align: center;
    }
    .invice_number, .date{
        border: 1px solid rgba(0, 0, 0, 0.5);
    }
    .add_btn{
        width: 80%;
        margin: auto;
        margin-bottom: 10px;
    }
    #search_ruselt{
        margin-bottom: 200px;
    }
    .tpp{
        margin: auto;
        display: flex;
        background-color: rgb(255, 222, 161);
        width: fit-content;
        padding: 5px;
        border-radius: 20px;
        margin-bottom: 10px;


    }
    .total_qty{
        display: flex;
        justify-content: center;
    }
    .total_qty div{
        margin-right: 10px;
    }
    </style>
<h6>Welcome.{{m.medical_name}}</h6>
<input type="hidden" id="medical_id" value="{{m.id}}">
<a class="btn btn-danger" href="/owner/owner_dashboard/">back</a>

<div id="search_ruselt">

    <div>

  <form method="POST">{% csrf_token %}
    <div class="item_box">
        <div class="item_name" >
            <input type="text" class="form-control" placeholder="Item Name" name="item_name">
        </div>
        <input type="hidden" name="item_id" value="{{i.id}}">
        <div class="m-3">
        <div><input type="text" placeholder="Company Name" class="form-control"></div>
        <br>
            <div>
            <select class="form-select" aria-label="Default select example">
                <option selected>Select type</option>
                <option value="Capsules">Capsules</option>
                <option value="Drops">Drops</option>
                <option value="Injections">Injections</option>
                <option value="Tablet">Tablet</option>
                <option value="Inhalers">Inhalers</option>
                <option value="stationery">stationery items</option>
            </select>
        </div>
        </div>
        <div class="items">
            <div> <p>Purchase price</p> <input name="price" placeholder="Price" id="prc" oninput="calculte_price()" class="price form-control" type="number"></div>
            <div> <p>GST </p> <select class="form-select" aria-label="Default select example" id="gst" oninput="calculte_price()">
                <option selected>Select %</option>
                <option value="5">5 %</option>
                <option value="10">10 %</option>
                <option value="12">12 %</option>
                <option value="18">18 %</option>
            </select></div>
        </div>
        <div class="items_qty">
            <div class="items_qty_footer">
                <div><p class="qty_p">Qty</p><input name="add_qty" class="qty for_qty sub form-control" id="qty" oninput="calculte_price(),calculte_qty()" placeholder="Qty" type="number"></div>
                <div><p class="qty_p">Select Stripe</p><select class="sub form-select" aria-label="Default select example" id="stripe" oninput="calculte_qty()">

                    <option value="1" selected>1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select></div>

            </div>
            
            <div class="total_qty">
                <div><h6 class="qty_p">Total Qty</h6></div>
                <div><strong  id="set_qty"></strong></div>
                </div>
        </div>
        <div class="tpp">
            <div><h6>Taxable Purchase Rs.</h6></div>
            <div><strong  id="set_prc"></strong></div>
        </div>

        <div class="items_qty">
            <div class="items_qty_footer">
                <div><p class="qty_p">discount Qty</p><input name="add_qty" class="qty for_qty sub form-control" id="d_qty" placeholder="Qty" type="number" oninput="calculte_discount_qty()"></div>
                <div><p class="qty_p">Select Stripe</p><select class="sub form-select" aria-label="Default select example" id="d_stripe" oninput="calculte_discount_qty()">
                    <option value="1" selected>1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select></div>

            </div>
            
            <div class="total_qty">
                <div><h6 class="qty_p">Total Discount Qty</h6></div>
                <div><strong  id="set_d_qty"></strong></div>
                </div>
        </div>



        <div class="item_footer">
            <div> <p>Invice number</p> <input name="invice_number" class="invice_number form-control" placeholder="Invice number" type="text"></div>
            <div> <p>Expiry date</p> <input name="expiry_date" class="date form-control" type="date"></div>
        </div>


        <div class="item_footer">
            <div> <p>Sell price</p> <input name="price" placeholder="Price"  class="price form-control" type="number"></div>
            <div> <p>Batch number</p> <input name="add_qty" class="qty form-control" placeholder="Batch number" type="text"></div>
        </div>
        <div class="add_btn">
            
            <button name="Add_Stock_Item" class="btn btn-success form-control">Add stock</button>
        </div>
    </div>
</form>
</div>
</div>


<script>
function calculte_price(){
    var price = document.getElementById('prc').value;
    var qty = document.getElementById('qty').value;
    var gst = document.getElementById('gst').value;
    p=qty*price
    var c = (parseFloat(p)*parseFloat(gst))/100;
    p+=c
    p = Math.ceil(p);
    document.getElementById('set_prc').innerHTML=p;
}
function calculte_qty(){
    var qty = document.getElementById('qty').value;
    var stripe = document.getElementById('stripe').value;
    q=qty*stripe
    q = Math.ceil(q);
    console.log(q)
    document.getElementById('set_qty').innerHTML=q;
    
    }


function calculte_discount_qty(){
    var d_qty = document.getElementById('d_qty').value;
    var d_stripe = document.getElementById('d_stripe').value;
    d=d_qty*d_stripe
    d = Math.ceil(d);
    document.getElementById('set_d_qty').innerHTML=d;
    
    }
</script>
{% endblock content %}